# CalculatorBack (Дорабатывается функционал...)

**Многофункциональный REST-калькулятор на Go с поддержкой базовых, астрономических и физических вычислений.**

---

## Оглавление

- [Описание](#описание)
- [Технологии](#технологии)
- [Архитектурные подходы](#архитектурные-подходы)
- [Структура проекта](#структура-проекта)
- [Запуск](#запуск)
- [API-примеры](#api-примеры)

---

## Описание

CalculatorBack — серверное приложение на Go, реализующее REST API для различных типов калькуляторов:
- **Basic**: базовые математические выражения (`govaluate`)
- **Astro**: астрономические расчёты (определение знака зодиака, фаза луны и др.)
- **Physics**: (расширяемый) физические формулы

Данные расчетов хранятся в PostgreSQL, запросы обрабатываются через фреймворк Echo.
Фронтенд реализован отдельно на React.

---

## Технологии

- **Go** — основной язык back-end.
- **Echo** — web-фреймворк с поддержкой middleware и CORS.
- **Gorm** — ORM для доступа к PostgreSQL.
- **govaluate** — библиотека для парсинга и выполнения математических выражений.
- **uuid** — генерация уникальных идентификаторов для каждой записи.
- **PostgreSQL** — БД для хранения истории вычислений.
- **Frontend** — React для UI пользователя.

---

## Архитектурные подходы

- **Модульность**: для каждого калькулятора — свой сервис, репозиторий, модель.
- **Интерфейсы и внедрение зависимостей**: компоненты получают зависимости через конструктор, легко тестировать и расширять.
- **Чистый REST API**: единые эндпоинты для создания, получения, обновления и удаления вычислений.
- **Отделение бизнес-логики от HTTP-обработки**: сервисы не зависят от контроллеров.
- **Ошибки обработаны**: вся обработка ошибок централизована, клиент всегда получает валидный JSON.

---

## Структура проекта

```
calculatorback/
│
├── cmd/
│ └── main.go # точка входа
│
├── internal/
│ ├── calculationService/
│ │ ├── service.go # базовые вычисления
│ │ ├── astroService.go # астрокалькулятор
│ │ ├── physicsService.go # физический калькулятор
│ │ ├── repository.go # универсальный репозиторий
│ │ └── orm.go # модели БД
│ ├── handlers/
│ │ └── calculationHandlers.go
│ └── db/
│ └── db.go # подключение к БД
│
├── frontend/ # фронтенд
├── go.mod
├── go.sum
└── README.md # это описание
```

---

## Запуск

1. Клонируйте и перейдите в проект:
```
git clone https://github.com/<ваш-юзернейм>/calculatorback.git
cd calculatorback
```

2. Запустите backend:
- Проверьте строку подключения в `internal/db/db.go` (user, password, порт).
- Соберите зависимости и стартуйте сервер:
  ```
  go mod tidy
  go run main.go
  ```
- на стандартном порту будет доступен API: `localhost:8080`

3. Запустите frontend:
```
cd frontend
npm install
npm start
```

---

## API-примеры

- Список расчетов всех типов:
```
GET /calculations
```
- Создать новый расчет:
```
POST /calculations
{
"type": "basic",
"expression": "2+2*2"
}
```
POST /calculations
{
"type": "astro",
"expression": "2001-09-15"
}
```
- Получить расчет по ID:
```
GET /calculations/{id}
```

- Получить только астрологические:
GET /calculations?type=astro
